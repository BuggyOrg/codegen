func P_{{name}} ({{argumentList}}) {
  for {
    {{#each continuationInput}}
    {{get name type}}
    {{/each}}
    {{#if isContinuation}}
    {{get "continuation" "bool"}}
    if !continuation {
      continue
    }
    {{/if}}
    {{#each nonContinuationInput}}
    {{get name type}}
    {{/each}}
    // implementation
    {{compiledCode}}
    {{#each output}}
    {{send name type}}
    {{/each}}
  }
  {{#if needsWaitGroup}}
  wg.Done()
  {{/if}}
  {{#each output}}
  {{close name}}
  {{/each}}
}